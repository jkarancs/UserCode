1.

From the log directory, collect all PixelTKFECSupervisor log files:

touch ~/TKFECSupervisor_logs_23Oct2009.txt
foreach a ( `ls -1 | grep "Log_.*2009"` )
  cd $a
  foreach b(`grep "PixelTKFECSupervisor::Configure" * | cut -f1 -d: | sort | uniq`)
    echo $a/$b >> ~/TKFECSupervisor_logs_23Oct2009.txt
  end
  cd ..
end

Create a list of delays and runs:

touch ~/Runs_and_delays.txt
foreach a ( `cat ~/TKFECSupervisor_logs_23Oct2009.txt ` )
  echo $a >> ~/Runs_and_delays.txt
  cat $a | grep "Start Run [0-9]*|global delay" | sed 's/\(.*Run \)\([0-9]*\)\(.*\)/Run \2/;s/\(.*\)\(0x[0-9,a-f]*\)\(.*\)/Delay \2/' >> ~/Runs_and_delays.txt
end

In this list delay comes first and the run the delay was configured for.


2.

Also from the log directory, get all the PixelSupervisor log files:

touch ~/PixelSupervisor_logs_23Oct2009.txt
foreach a ( `ls -1 | grep "Log_.*2009"` )
  cd $a
  foreach b(`grep "PixelSupervisor::.*onfigur" *.log | cut -f1 -d: | sort | uniq`)
    echo $a/$b >> ~/PixelSupervisor_logs_23Oct2009.txt
  end
  cd ..
end

Create a list of dac keys and runs:

touch ~/Runs_and_dacs.txt
foreach a ( `cat ~/PixelSupervisor_logs_23Oct2009.txt ` )
  echo $a >> ~/Runs_and_dacs.txt
  cat $a | grep "Start Run [0-9]*|Message : dac" | sed 's/\(.*Run \)\([0-9]*\)\(.*\)/Run \2/;s/\(Message.*\)\(dac [0-9]*\)\(.*\)/\2/' >> ~/Runs_and_dacs.txt
end

Replace dac with wbc when dac exists on files:

foreach a ( `cat ~/Runs_and_dacs.txt | grep dac | awk '{ print $2 }'` )
  set wbc=`grep WBC: /pixel/config/Pix/dac/$a/*MOD?.dat /pixel/config/Pix/dac/$a/*PNL?.dat | awk '{ print $2 }' | sort | uniq`
  if ( .$wbc != . ) then
    cat ~/Runs_and_dacs.txt | sed 's/dac '$a'/WBC '$wbc'/g' > ~/dummy
    mv ~/dummy ~/Runs_and_dacs.txt
  endif
end

