// twiki: https://twiki.cern.ch/twiki/bin/view/CMS/LumiCalc
// Everything excecutes as is - no need to modify
cd ~/LumiCalc/CMSSW_5_2_4/src/RecoLuminosity/LumiDB
setup_cms
setenv SCRAM_ARCH slc5_amd64_gcc462
cmsenv

// Get 2010 DCS - get lumi info - reformat
wget --no-check-certificate https://cms-service-dqm.web.cern.ch/cms-service-dqm/CAF/certification/Collisions10/7TeV/DCSOnly/DCSTRONLY_132440-149442
mv DCSTRONLY_132440-149442 json_2010
scripts/lumiCalc2.py -c frontier://LumiCalc/CMS_LUMI_PROD -i json_2010 --nowarning delivered | grep -v WARNING | tail -n+4 | head -n-6 | sed "s;:; ;" | sed "s;(/ub);1;;s;(/nb);1000;;s;(/pb);1000000;" | awk '{ printf "%d %f\n", $2, $7*$8 }' >! 10.txt

// Get latest 2011 DCS - get lumi info - reformat
wget --no-check-certificate https://cms-service-dqm.web.cern.ch/cms-service-dqm/CAF/certification/Collisions11/7TeV/DCSOnly/json_DCSONLY.txt
mv json_DCSONLY.txt json_2011
scripts/lumiCalc2.py -c frontier://LumiCalc/CMS_LUMI_PROD -i json_2011 --nowarning delivered | grep -v WARNING | tail -n+4 | head -n-6 | sed "s;:; ;" | sed "s;(/ub);1;;s;(/nb);1000;;s;(/pb);1000000;" | awk '{ printf "%d %f\n", $2, $7*$8 }' >! 11.txt

// Get latest 2012 DCS - get lumi info - reformat
wget --no-check-certificate https://cms-service-dqm.web.cern.ch/cms-service-dqm/CAF/certification/Collisions12/8TeV/DCSOnly/json_DCSONLY.txt
mv json_DCSONLY.txt json_2012
scripts/lumiCalc2.py -c frontier://LumiCalc/CMS_LUMI_PROD -i json_2012 --nowarning delivered | grep -v WARNING | tail -n+4 | head -n-6 | sed "s;:; ;" | sed "s;(/ub);1;;s;(/nb);1000;;s;(/pb);1000000;" | awk '{ printf "%d %f\n", $2, $7*$8 }' >! 12.txt

cat 10.txt 11.txt 12.txt >! 10_11_12.txt
cp 10_11_12.txt ~/Make_histogram/input/total_intlumi_ub.txt

root read_lumi.C

// default file: 12.txt
// check for consistency on this page:
https://twiki.cern.ch/twiki/bin/view/CMSPublic/LumiPublicResults
